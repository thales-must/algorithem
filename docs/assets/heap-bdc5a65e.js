var E=Object.defineProperty;var L=(s,t,e)=>t in s?E(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var b=(s,t,e)=>(L(s,typeof t!="symbol"?t+"":t,e),e);import{d as H,o as a,c,F as g,r as S,a as f,b as p,t as O,e as U,f as d,g as j,h as q,i as _,j as o,w as i,k as I,l as m,m as w}from"./index-22867da4.js";const G={version:"1.1",width:"600",height:"400",xmlns:"http://www.w3.org/2000/svg"},J=["opacity","x2","y2","x1","y1"],K=["begin"],P=["x","y","opacity"],Q=p("circle",{cx:"0",cy:"0",r:"20",fill:"white",stroke:"black"},null,-1),R={x:"0",y:"5","text-anchor":"middle"},W=["begin"],A=H({__name:"heap-tree",props:{step:{},animate:{type:Boolean}},setup(s){const t=s;return(e,r)=>(a(),c("svg",G,[(a(!0),c(g,null,S(t.step,(n,l)=>(a(),c(g,null,[n.parentY!=0?(a(),c("line",{key:0,opacity:t.animate?0:1,x2:n.x+20,y2:n.y+20,x1:n.parentX+20,y1:n.parentY+20,stroke:"black","stroke-dasharray":"200, 20","stroke-dashoffset":"200"},[t.animate?(a(),c("animate",{key:0,attributeName:"opacity",from:"0",to:"1",dur:"1s",begin:`${Number(l*.5)+1}s`,fill:"freeze"},null,8,K)):f("",!0)],8,J)):f("",!0),(a(),c("svg",{x:n.x,y:n.y,viewBox:"-20, -20, 40, 40",width:"40",height:"40",opacity:t.animate?0:1},[Q,p("text",R,O(n.value),1),t.animate?(a(),c("animate",{key:0,attributeName:"opacity",from:"0",to:"1",dur:"1s",begin:`${l*.5}s`,fill:"freeze"},null,8,W)):f("",!0)],8,P))],64))),256))]))}});class F{constructor(t){b(this,"_arr",[]);b(this,"_step",[]);this._arr=t}init(){this._step=new Array(this._arr.length),this.drawTree(0,300,50,150)}getStep(){return[...this._step]}getArr(){return[...this._arr]}drawTree(t,e=0,r=0,n=0,l=0,v=0){if(t<this._arr.length){this._step[t]={index:t,value:this._arr[t],parentX:l,parentY:v,x:e,y:r};const h=2*t+1,y=2*t+2;this.drawTree(h,e-n,r+50,n/2,e,r),this.drawTree(y,e+n,r+50,n/2,e,r)}}build(){const t=this._arr.length;for(let e=Math.floor(t/2)-1;e>=0;e--)this.heapify(t,e)}sort(){const t=this._arr.length;for(var e=t-1;e>0;e--)this.swap(e,0),this.heapify(e,0)}heapify(t,e){let r=e,n=2*e+1,l=2*e+2;n<t&&this._arr[n]>this._arr[r]&&(r=n),l<t&&this._arr[l]>this._arr[r]&&(r=l),r!==e&&(this.swap(e,r),this.heapify(t,r))}swap(t,e){const r=this._arr[t];this._arr[t]=this._arr[e],this._arr[e]=r}}const Z=U({id:"heap",state:()=>({_form:{},_origin:[],_current:[],_initStep:[],_step:[]}),getters:{form(){return this._form},origin(){return this._origin},current(){return this._current},initStep(){return this._initStep},step(){return this._step}},actions:{input(s){const t=s.split(",");this._origin=[];for(const r of t)this._origin.push(Number(r));this._initStep=[];const e=new F([...this._origin]);e.init(),this._initStep=e.getStep()},start(){const s=new F([...this._origin]);s.build(),s.init(),this._step=s.getStep(),s.sort(),this._current=s.getArr()},init(){this._form={str:"4,1,2,3,16,9,10,14,8,7"}}}}),X={class:"algorithm"},tt=p("h1",null,"Heap",-1),et=p("p",null,"Origin Array",-1),rt=p("p",null,"Init Tree",-1),nt=p("p",null,"Build Tree",-1),st=p("p",null,"Final Array",-1),lt=H({__name:"heap",setup(s){const t=Z(),e=d(()=>t.form),r=d(()=>t.origin),n=d(()=>t.current),l=d(()=>t.step),v=d(()=>t.initStep),h=j();function y(){t.input(e.value.str)}function M(){t.start(),console.log(h.value),h.value.$el.scrollIntoView({behavior:"smooth"})}return q(()=>{t.init()}),(ot,k)=>{const x=_("v-card-title"),z=_("v-text-field"),$=_("v-card-text"),N=_("v-btn"),V=_("v-card-actions"),Y=_("v-form"),B=_("v-card"),D=_("v-spacer"),T=_("v-chip"),C=_("v-chip-group");return a(),c("article",X,[tt,o(B,null,{default:i(()=>[o(Y,{onSubmit:I(y,["prevent"])},{default:i(()=>[o(x,null,{default:i(()=>[m("Input")]),_:1}),o($,null,{default:i(()=>[o(z,{modelValue:e.value.str,"onUpdate:modelValue":k[0]||(k[0]=u=>e.value.str=u),variant:"outlined",label:"Number Series",hint:"输入数字，用空格分隔，如 1,2,3,4"},null,8,["modelValue"])]),_:1}),o(V,null,{default:i(()=>[o(N,{type:"submit",variant:"outlined"},{default:i(()=>[m("Submit")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1}),o(D,{style:{height:"2em"}}),o(B,null,{default:i(()=>[o(x,null,{default:i(()=>[m(" Init ")]),_:1}),o(V,null,{default:i(()=>[r.value.length>0?(a(),w(N,{key:0,type:"button",variant:"outlined",onClick:I(M,["stop"])},{default:i(()=>[m("start")]),_:1},8,["onClick"])):f("",!0)]),_:1}),o($,null,{default:i(()=>[et,o(C,null,{default:i(()=>[(a(!0),c(g,null,S(r.value,u=>(a(),w(T,{key:u,text:String(u)},null,8,["text"]))),128))]),_:1}),rt,o(A,{step:v.value,animate:""},null,8,["step"]),nt,o(A,{step:l.value},null,8,["step"]),st,o(C,{ref_key:"currentItem",ref:h},{default:i(()=>[(a(!0),c(g,null,S(n.value,u=>(a(),w(T,{key:u,text:String(u)},null,8,["text"]))),128))]),_:1},512)]),_:1})]),_:1})])}}});export{lt as default};
